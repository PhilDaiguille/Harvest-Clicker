document.addEventListener("DOMContentLoaded",()=>{console.log("charged");let fermier=0,btn,nbr;btn=document.querySelector("main input"),nbr=document.querySelector("main figure p"),btn.addEventListener("click",()=>{patate+=1,console.log(patate),nbr.innerHTML=`${patate.toFixed(2)}`,localStorage.setItem("Nombre de patate",patate)});let buy=document.querySelector('main figure section ul li input[type="submit"]'),prixF=25,nbrF=document.querySelector("main figure section ul li:nth-child(2)"),prix=document.querySelector("main figure section ul li:last-child");prix.innerHTML=`${prixF.toFixed(2)} $`,buy.addEventListener("click",()=>{patate>=prixF&&(fermier+=1,patate-=prixF,prixF*=1.2,console.log(prixF),nbrF.innerHTML=`${fermier}`,nbr.innerHTML=`${patate.toFixed(2)}`,prix.innerHTML=`${prixF.toFixed(2)} $`,localStorage.setItem("Nombre de fermier",fermier),localStorage.setItem("Prix des fermiers",prixF),localStorage.setItem("Nombre de patate",patate))}),tracteur=0;let buy2=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(4) > input:nth-child(1)"),prixT=75,nbrT=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(2)"),prix2=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(5)");prix2.innerHTML=`${prixT.toFixed(2)} $`,buy2.addEventListener("click",()=>{patate>=prixT&&(tracteur+=1,patate-=prixT,prixT*=1.25,console.log(prixF),nbrT.innerHTML=`${tracteur}`,nbr.innerHTML=`${patate.toFixed(2)}`,prix2.innerHTML=`${prixT.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Nombre de tracteur",tracteur),localStorage.setItem("Prix des tracteurs",prixT))});let upgrade=document.querySelector(".upgrade > ul:nth-child(2) > li:nth-child(1)"),gear=1,prixG=1e3;upgrade.addEventListener("click",()=>{patate>=prixG&&(gear+=2,patate-=prixG,prixG*=1.75,console.log(gear),console.log(prixG),nbr.innerHTML=`${patate}`,upgrade.innerHTML=`⚙️ ${prixG.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Prix des améliorations",prixG),localStorage.setItem("Nombre de gear",gear))}),window.addEventListener("load",()=>{if(patate=localStorage.getItem("Nombre de patate"),fermier=localStorage.getItem("Nombre de fermier"),tracteur=localStorage.getItem("Nombre de tracteur"),gear=localStorage.getItem("Nombre de gear"),prixF=localStorage.getItem("Prix des fermiers"),prixT=localStorage.getItem("Prix des tracteurs"),prixG=localStorage.getItem("Prix des améliorations"),patate=parseInt(patate),fermier=parseInt(fermier),tracteur=parseInt(tracteur),gear=parseInt(gear),prixF=parseInt(prixF),prixT=parseInt(prixT),prixG=parseInt(prixG),isNaN(patate)&&(nbr.innerHTML="0",patate=0,localStorage.setItem("Nombre de patate",patate)),isNaN(fermier)&&(nbrF.innerHTML="0",fermier=0,localStorage.setItem("Nombre de fermier",fermier)),isNaN(tracteur)&&(nbrT.innerHTML="0",tracteur=0,localStorage.setItem("Nombre de tracteur",tracteur)),isNaN(gear)&&(nbrF.innerHTML="0",gear=0,localStorage.setItem("Nombre de gear",gear)),isNaN(prixF)){let prixF=25;prix.innerHTML=`${prixF.toFixed(2)} $`,localStorage.setItem("Prix des fermiers",prixF)}if(isNaN(prixT)){let prixT=75;prix2.innerHTML=`${prixT.toFixed(2)} $`,localStorage.setItem("Prix des tracteurs",prixT)}if(isNaN(prixF)){let prixG=1e3;upgrade.innerHTML=`⚙️ ${prixG.toFixed(2)} $`,localStorage.setItem("Prix des améliorations",prixG)}else nbr.innerHTML=`${patate}`,nbrF.innerHTML=`${fermier}`,nbrT.innerHTML=`${tracteur}`,prix.innerHTML=`${prixF.toFixed(2)} $`,prix2.innerHTML=`${prixT.toFixed(2)} $`,upgrade.innerHTML=`⚙️ ${prixG.toFixed(2)} $`});let element=document.querySelector("#chargement"),width=0;function chargement(){let identity=setTimeout(chargement,10);width>=100?(width=0,clearInterval(identity)):(width+=1,element.style.width=width+"%")}let farm=document.querySelector(".farm"),Farm=()=>{patate=localStorage.getItem("Nombre de patate"),patate=parseInt(patate),setTimeout(Farm,1e3),gear>=2?(patate+=(fermier+5*tracteur)*gear,nbr.innerHTML=`${patate.toFixed(2)}`,farm.innerHTML=`${(fermier+5*tracteur)*gear} patate /sec`):(patate+=fermier+5*tracteur,nbr.innerHTML=`${patate.toFixed(2)}`,farm.innerHTML=`${fermier+5*tracteur} patate /sec`),0==fermier&&0==tracteur&&0==gear||chargement(),localStorage.setItem("Nombre de patate",patate)};Farm();let AutoSave=()=>{setTimeout(AutoSave,5e4),console.log("Autosave..."),localStorage.setItem("Nombre de patate",patate)},reset;AutoSave(),document.querySelector(".reset").addEventListener("click",()=>{let confirmation;confirm("Voulez-vous vraiment rédémarrer la partie ?")&&(localStorage.clear(),location.reload(),nbr.innerHTML=`${patate}`)})});