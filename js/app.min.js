document.addEventListener("DOMContentLoaded",()=>{console.log("Chargement...");let fermier=0,btn,nbr,main=document.querySelector("main input"),pouf=document.querySelector("main .patate");btn=document.querySelector("main input"),nbr=document.querySelector("main figure p"),btn.addEventListener("click",()=>{patate+=1,nbr.innerHTML=`${patate.toFixed(2)}`,localStorage.setItem("Nombre de patate",patate)});let buy=document.querySelector('main figure section ul li input[type="submit"]'),nbrF=document.querySelector("main figure section ul li:nth-child(2)"),prix=document.querySelector("main figure section ul li:last-child"),prixF=25;prix.innerHTML=`${prixF.toFixed(2)} $`,console.log(prixF),buy.addEventListener("click",()=>{prixF=localStorage.getItem("Prix des fermiers"),prixF=parseInt(prixF),patate>=prixF?(fermier+=1,patate-=prixF,prixF*=1.3,nbrF.innerHTML=`${fermier}`,nbr.innerHTML=`${patate}`,prix.innerHTML=`${prixF.toFixed(2)} $`,localStorage.setItem("Nombre de fermier",fermier),localStorage.setItem("Prix des fermiers",prixF),localStorage.setItem("Nombre de patate",patate)):(console.log("peut pas acheter"),console.log(patate,">=",prixF))}),tracteur=0;let buy2=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(4) > input:nth-child(1)"),prixT=125,nbrT=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(2)"),prix2=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(2) > ul:nth-child(1) > li:nth-child(5)");prix2.innerHTML=`${prixT.toFixed(2)} $`,buy2.addEventListener("click",()=>{prixT=localStorage.getItem("Prix des tracteurs"),prixT=parseInt(prixT),patate>=prixT&&(tracteur+=1,patate-=prixT,prixT*=1.4,nbrT.innerHTML=`${tracteur}`,nbr.innerHTML=`${patate}`,prix2.innerHTML=`${prixT.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Nombre de tracteur",tracteur),localStorage.setItem("Prix des tracteurs",prixT))}),moulin=0;let buy3=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(3) > ul:nth-child(1) > li:nth-child(4) > input:nth-child(1)"),prixM=325,nbrM=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(3) > ul:nth-child(1) > li:nth-child(2)"),prix3=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(3) > ul:nth-child(1) > li:nth-child(5)");prix3.innerHTML=`${prixM.toFixed(2)} $`,buy3.addEventListener("click",()=>{prixM=localStorage.getItem("Prix des moulins"),prixM=parseInt(prixM),patate>=prixM&&(moulin+=1,patate-=prixM,prixM*=1.8,console.log(prixM),nbrM.innerHTML=`${moulin}`,nbr.innerHTML=`${patate}`,prix3.innerHTML=`${prixM.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Nombre de moulin",moulin),localStorage.setItem("Prix des moulins",prixM))}),grange=0;let buy4=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(4) > ul:nth-child(1) > li:nth-child(4) > input:nth-child(1)"),prixGr=750,nbrGr=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(4) > ul:nth-child(1) > li:nth-child(2)"),prix4=document.querySelector(".centre > figure:nth-child(2) > section:nth-child(4) > ul:nth-child(1) > li:nth-child(5)");prix4.innerHTML=`${prixGr.toFixed(2)} $`,buy4.addEventListener("click",()=>{prixGr=localStorage.getItem("Prix des granges"),prixGr=parseInt(prixGr),patate>=prixGr&&(grange+=1,patate-=prixGr,prixGr*=2,console.log(prixGr),nbrGr.innerHTML=`${grange}`,nbr.innerHTML=`${patate}`,prix4.innerHTML=`${prixGr.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Nombre de grange",grange),localStorage.setItem("Prix des granges",prixGr))});let upgrade=document.querySelector(".upgrade > ul:nth-child(2) > li:nth-child(1)"),gear=1,prixG=2500;upgrade.addEventListener("click",()=>{prixG=localStorage.getItem("Prix des engrenages"),prixG=parseInt(prixG),patate>=prixG&&(gear+=2,patate-=prixG,prixG*=1.8,nbr.innerHTML=`${patate}`,upgrade.innerHTML=`<img src="./assets/gear.png"/> ${prixG.toFixed(2)} $ <br> Effet X2 `,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Prix des améliorations",prixG),localStorage.setItem("Nombre de gear",gear))});let upgrade2=document.querySelector(".upgrade > ul:nth-child(2) > li:nth-child(2)"),engrais=1,prixE=15e3;upgrade2.addEventListener("click",()=>{prixE=localStorage.getItem("Prix des engrais"),prixE=parseInt(prixE),patate>=prixE&&(engrais+=5,patate-=prixE,prixE*=2.2,nbr.innerHTML=`${patate}`,upgrade2.innerHTML=`<img src="./assets/engrais.png"/> <br> ${prixE.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Prix des améliorations",prixE),localStorage.setItem("Nombre d'engrias",engrais))});let upgrade3=document.querySelector(".upgrade > ul:nth-child(2) > li:nth-child(3)"),ordinateur=1,prixO=15e4;upgrade3.addEventListener("click",()=>{prixO=localStorage.getItem("Prix des ordinateurs"),prixO=parseInt(prixO),patate>=prixO&&(ordinateur+=10,patate-=prixO,prixO*=3,nbr.innerHTML=`${patate}`,upgrade3.innerHTML=`<img src="./assets/ordi.png"/> <br> ${prixE.toFixed(2)} $`,localStorage.setItem("Nombre de patate",patate),localStorage.setItem("Prix des engrenages",prixO),localStorage.setItem("Nombre d'ordinateur",ordinateur))}),window.addEventListener("load",()=>{if(patate=localStorage.getItem("Nombre de patate"),patate=parseInt(patate),fermier=localStorage.getItem("Nombre de fermier"),fermier=parseInt(fermier),tracteur=localStorage.getItem("Nombre de tracteur"),tracteur=parseInt(tracteur),moulin=localStorage.getItem("Nombre de moulin"),moulin=parseInt(moulin),grange=localStorage.getItem("Nombre de grange"),grange=parseInt(grange),gear=localStorage.getItem("Nombre de gear"),gear=parseInt(gear),engrais=localStorage.getItem("Nombre d'engrais"),engrais=parseInt(engrais),ordinateur=localStorage.getItem("Nombre d'ordinateur"),ordinateur=parseInt(ordinateur),prixF=localStorage.getItem("Prix des fermiers"),prixF=parseInt(prixF),prixT=localStorage.getItem("Prix des tracteurs"),prixT=parseInt(prixT),prixM=localStorage.getItem("Prix des moulins"),prixM=parseInt(prixM),prixGr=localStorage.getItem("Prix des granges"),prixGr=parseInt(prixGr),prixG=localStorage.getItem("Prix des engrenages"),prixG=parseInt(prixG),prixE=localStorage.getItem("Prix des engrais"),prixE=parseInt(prixE),prixO=localStorage.getItem("Prix des ordinateurs"),prixO=parseInt(prixO),isNaN(patate)&&(nbr.innerHTML="0",patate=0,localStorage.setItem("Nombre de patate",patate)),isNaN(fermier)&&(nbrF.innerHTML="0",fermier=0,localStorage.setItem("Nombre de fermier",fermier)),isNaN(tracteur)&&(nbrT.innerHTML="0",tracteur=0,localStorage.setItem("Nombre de tracteur",tracteur)),isNaN(moulin)&&(nbrM.innerHTML="0",moulin=0,localStorage.setItem("Nombre de moulin",moulin)),isNaN(grange)&&(nbrGr.innerHTML="0",grange=0,localStorage.setItem("Nombre de grange",grange)),isNaN(gear)&&(gear=0,localStorage.setItem("Nombre de gear",gear)),isNaN(engrais)&&(engrais=0,localStorage.setItem("Nombre d'engrais",engrais)),isNaN(ordinateur)&&(ordinateur=0,localStorage.setItem("Nombre d'ordinateur",ordinateur)),isNaN(prixF)){let prixF=25;prix.innerHTML=`${prixF.toFixed(2)} $`,localStorage.setItem("Prix des fermiers",prixF)}if(isNaN(prixT)){let prixT=75;prix2.innerHTML=`${prixT.toFixed(2)} $`,localStorage.setItem("Prix des tracteurs",prixT)}if(isNaN(prixM)){let prixM=325;prix3.innerHTML=`${prixM.toFixed(2)} $`,localStorage.setItem("Prix des moulins",prixM)}if(isNaN(prixGr)){let prixGr=750;prix4.innerHTML=`${prixGr.toFixed(2)} $`,localStorage.setItem("Prix des granges",prixGr)}if(isNaN(prixG)){let prixG=2500;upgrade.innerHTML=`<img src="./assets/gear.png" alt="engrenage"/> ${prixG.toFixed(2)} $ <br> Effet X2 `,localStorage.setItem("Prix des engrenages",prixG)}if(isNaN(prixE)){let prixE=15e3;upgrade2.innerHTML=`<img src="./assets/engrais.png" alt="engrais"/> ${prixE.toFixed(2)} $ <br> Effet X5 `,localStorage.setItem("Prix des engrais",prixE)}if(isNaN(prixO)){let prixO=15e4;upgrade3.innerHTML=`<img src="./assets/ordi.png" alt="ordinateur"/> ${prixO.toFixed(2)} $ <br> Effet X10 `,localStorage.setItem("Prix des ordinateurs",prixO)}else nbr.innerHTML=`${patate}`,nbrF.innerHTML=`${fermier}`,nbrT.innerHTML=`${tracteur}`,nbrM.innerHTML=`${moulin}`,nbrGr.innerHTML=`${grange}`,prix.innerHTML=`${prixF.toFixed(2)} $`,prix2.innerHTML=`${prixT.toFixed(2)} $`,prix3.innerHTML=`${prixM.toFixed(2)} $`,prix4.innerHTML=`${prixGr.toFixed(2)} $`,upgrade.innerHTML=`<img src="./assets/gear.png" alt="engrenage"/> ${prixG.toFixed(2)} $ <br> Effet X2 `,upgrade2.innerHTML=`<img src="./assets/engrais.png" alt="engrais"/> ${prixE.toFixed(2)} $ <br> Effet X2 `,upgrade3.innerHTML=`<img src="./assets/ordi.png" alt="ordinateur"/> ${prixO.toFixed(2)} $ <br> Effet X2 `});let farm=document.querySelector(".farm"),element=document.querySelector("#chargement"),width=0;function chargement(){let identity=setTimeout(chargement,10);width>=100?(width=0,clearInterval(identity)):(width+=1,element.style.width=width+"%")}let Farm=()=>{patate=localStorage.getItem("Nombre de patate"),patate=parseInt(patate),setTimeout(Farm,1e3),gear>=2?(patate+=(fermier+5*tracteur+10*moulin+100*grange)*gear,nbr.innerHTML=`${patate.toFixed(2)}`,farm.innerHTML=`${(fermier+5*tracteur+10*moulin+100*grange)*gear} patate /sec`):(patate+=fermier+5*tracteur+10*moulin+100*grange,nbr.innerHTML=`${patate.toFixed(2)}`,farm.innerHTML=`${fermier+5*tracteur+10*moulin+100*grange} patate /sec`),fermier+5*tracteur>0?chargement():farm.innerHTML="",localStorage.setItem("Nombre de patate",patate)};Farm();let AutoSave=()=>{setTimeout(AutoSave,5e4),console.log("Autosave..."),localStorage.setItem("Nombre de patate",patate)},reset;AutoSave(),document.querySelector(".reset").addEventListener("click",()=>{let confirmation;confirm("Voulez-vous vraiment rédémarrer la partie ?")&&(localStorage.clear(),location.reload(),nbr.innerHTML=`${patate}`)});let date=document.querySelector("footer p"),dates=new Date;date.innerHTML=`Copyright © ${dates.getFullYear()} - Philippe DELENTE | Tous droits réservés`,console.log("Tout est ok.")});